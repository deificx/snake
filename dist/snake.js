!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r,s=n(2),o=n(6),u=i(o),c=n(12),a=i(c),h=n(13),l=i(h),f=n(11),_=i(f),d=new u["default"],p=30,y=a["default"].getContext("2d"),m=new l["default"](y,a["default"].width,a["default"].height,p),v=0,g=20,k=50,b=a["default"].width-2*g,w=function x(){var e=(new Date).getTime(),t=e-(r||e);switch(r=e,y.fillStyle="#eee",y.fillRect(0,0,a["default"].width,a["default"].height),m.update(t),m.render(),y.fillStyle="#999",y.font="32px sans-serif",m.getState()){case s.IDLE:y.fillText("Press return/enter to start a new game",g,k,b);break;case s.ENDED:y.fillText("GAME OVER!",g,k,b),y.fillText("Press return/enter to start a new game",g,2*k,b),m.getScore()>0&&m.getScore()>=v?(v=m.getScore(),y.fillText("Congratulations, new high score: "+v,g,3*k,b)):y.fillText("You scored "+m.getScore()+" points. Your high score is "+v,g,3*k,b);break;default:y.fillText(m.getScore(),g,k,b),d.request(x)}};d.request(w),_["default"].on("move",function(e){m.setDir(e)}),_["default"].on("new_game",function(){m.newGame(),d.request(w)})},function(e,t){"use strict";e.exports=Date.now||function(){return(new Date).getTime()}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.IDLE="IDLE",t.STARTED="STARTED",t.ENDED="ENDED",t.COOLDOWN=300,t.SCORE_CAP=200,t.SCORE_INCREASE=10},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){var i,r;(function(){var n,s,o,u,c,a,h,l,f,_,d,p,y,m,v,g,k,b,w,x,E,q,O={}.hasOwnProperty,T=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};f={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1},E=["meta","alt","option","ctrl","shift","cmd"],w="ctrl",s={},s.debug=!1,n=function(){function e(e){var t,n;for(t in e)O.call(e,t)&&(n=e[t],n!==!1&&(this[t]=n));this.keys=this.keys||[],this.count=this.count||0}return e.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"==typeof this.on_keydown},e.prototype.reset=function(){return this.count=0,this.keyup_fired=null},e}(),s.Listener=function(){function e(e,t){var n,i,r;"undefined"!=typeof jQuery&&null!==jQuery&&e instanceof jQuery&&(1!==e.length&&b("Warning: your jQuery selector should have exactly one object."),e=e[0]),this.should_suppress_event_defaults=!1,this.should_force_event_defaults=!1,this.sequence_delay=800,this._registered_combos=[],this._keys_down=[],this._active_combos=[],this._sequence=[],this._sequence_timer=null,this._prevent_capture=!1,this._defaults=t||{};for(i in f)O.call(f,i)&&(r=f[i],this._defaults[i]=this._defaults[i]||r);this.element=e||document.body,n=function(e,t,n){return e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n),n},this.keydown_event=n(this.element,"keydown",function(e){return function(t){return t=t||window.event,e._receive_input(t,!0),e._bug_catcher(t)}}(this)),this.keyup_event=n(this.element,"keyup",function(e){return function(t){return t=t||window.event,e._receive_input(t,!1)}}(this)),this.blur_event=n(window,"blur",function(e){return function(){var t,n,i,r;for(r=e._keys_down,n=0,i=r.length;i>n;n++)t=r[n],e._key_up(t,{});return e._keys_down=[]}}(this))}return e.prototype.destroy=function(){var e;return e=function(e,t,n){return null!=e.removeEventListener?e.removeEventListener(t,n):null!=e.removeEvent?e.removeEvent("on"+t,n):void 0},e(this.element,"keydown",this.keydown_event),e(this.element,"keyup",this.keyup_event),e(window,"blur",this.blur_event)},e.prototype._bug_catcher=function(e){var t;return"cmd"===w&&T.call(this._keys_down,"cmd")>=0&&"cmd"!==(t=a(e.keyCode))&&"shift"!==t&&"alt"!==t&&"caps"!==t&&"tab"!==t?this._receive_input(e,!1):void 0},e.prototype._cmd_bug_check=function(e){return"cmd"===w&&T.call(this._keys_down,"cmd")>=0&&T.call(e,"cmd")<0?!1:!0},e.prototype._prevent_default=function(e,t){return(t||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation)?e.stopPropagation():void 0},e.prototype._get_active_combos=function(e){var t,n;return t=[],n=_(this._keys_down,function(t){return t!==e}),n.push(e),this._match_combo_arrays(n,function(e){return function(n){return e._cmd_bug_check(n.keys)?t.push(n):void 0}}(this)),this._fuzzy_match_combo_arrays(n,function(e){return function(n){return T.call(t,n)>=0?void 0:!n.is_solitary&&e._cmd_bug_check(n.keys)?t.push(n):void 0}}(this)),t},e.prototype._get_potential_combos=function(e){var t,n,i,r,s;for(n=[],s=this._registered_combos,i=0,r=s.length;r>i;i++)t=s[i],t.is_sequence||T.call(t.keys,e)>=0&&this._cmd_bug_check(t.keys)&&n.push(t);return n},e.prototype._add_to_active_combos=function(e){var t,n,i,r,s,o,u,c,a,h,l,f,_,d,p;if(c=!1,u=!0,r=!1,T.call(this._active_combos,e)>=0)return!0;if(this._active_combos.length)for(o=a=0,d=this._active_combos.length;d>=0?d>a:a>d;o=d>=0?++a:--a)if(t=this._active_combos[o],t&&t.is_exclusive&&e.is_exclusive){if(i=t.keys,!c)for(h=0,f=i.length;f>h;h++)if(n=i[h],c=!0,T.call(e.keys,n)<0){c=!1;break}if(u&&!c)for(p=e.keys,l=0,_=p.length;_>l;l++)if(s=p[l],u=!1,T.call(i,s)<0){u=!0;break}c&&(r?(t=this._active_combos.splice(o,1)[0],null!=t&&t.reset()):(t=this._active_combos.splice(o,1,e)[0],null!=t&&t.reset(),r=!0),u=!1)}return u&&this._active_combos.unshift(e),c||u},e.prototype._remove_from_active_combos=function(e){var t,n,i,r;for(n=i=0,r=this._active_combos.length;r>=0?r>i:i>r;n=r>=0?++i:--i)if(t=this._active_combos[n],t===e){e=this._active_combos.splice(n,1)[0],e.reset();break}},e.prototype._get_possible_sequences=function(){var e,t,n,i,r,s,o,u,c,a,h,l,f;for(r=[],h=this._registered_combos,o=0,a=h.length;a>o;o++)for(e=h[o],n=u=1,l=this._sequence.length;l>=1?l>=u:u>=l;n=l>=1?++u:--u)if(s=this._sequence.slice(-n),e.is_sequence&&(!(T.call(e.keys,"shift")<0)||(s=_(s,function(e){return"shift"!==e}),s.length))){for(t=c=0,f=s.length;f>=0?f>c:c>f;t=f>=0?++c:--c){if(e.keys[t]!==s[t]){i=!1;break}i=!0}i&&r.push(e)}return r},e.prototype._add_key_to_sequence=function(e,t){var n,i,r,s;if(this._sequence.push(e),i=this._get_possible_sequences(),i.length){for(r=0,s=i.length;s>r;r++)n=i[r],this._prevent_default(t,n.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer),this.sequence_delay>-1&&(this._sequence_timer=setTimeout(function(){return this._sequence=[]},this.sequence_delay))}else this._sequence=[]},e.prototype._get_sequence=function(e){var t,n,i,r,s,o,u,c,a,h,l,f,d;for(l=this._registered_combos,u=0,h=l.length;h>u;u++)if(t=l[u],t.is_sequence){for(i=c=1,f=this._sequence.length;f>=1?f>=c:c>=f;i=f>=1?++c:--c)if(o=_(this._sequence,function(e){return T.call(t.keys,"shift")>=0?!0:"shift"!==e}).slice(-i),t.keys.length===o.length)for(n=a=0,d=o.length;d>=0?d>a:a>d;n=d>=0?++a:--a)if(s=o[n],!(T.call(t.keys,"shift")<0&&"shift"===s||"shift"===e&&T.call(t.keys,"shift")<0)){if(t.keys[n]!==s){r=!1;break}r=!0}if(r)return t.is_exclusive&&(this._sequence=[]),t}return!1},e.prototype._receive_input=function(e,t){var n;return this._prevent_capture?void(this._keys_down.length&&(this._keys_down=[])):(n=a(e.keyCode),(t||this._keys_down.length||"alt"!==n&&n!==w)&&n?t?this._key_down(n,e):this._key_up(n,e):void 0)},e.prototype._fire=function(e,t,n,i){return"function"==typeof t["on_"+e]&&this._prevent_default(n,t["on_"+e].call(t["this"],n,t.count,i)!==!0),"release"===e&&(t.count=0),"keyup"===e?t.keyup_fired=!0:void 0},e.prototype._match_combo_arrays=function(e,t){var n,i,r,s;for(s=this._registered_combos,i=0,r=s.length;r>i;i++)n=s[i],(!n.is_unordered&&c(e,n.keys)||n.is_unordered&&u(e,n.keys))&&t(n)},e.prototype._fuzzy_match_combo_arrays=function(e,t){var n,i,r,s;for(s=this._registered_combos,i=0,r=s.length;r>i;i++)n=s[i],(!n.is_unordered&&y(n.keys,e)||n.is_unordered&&p(n.keys,e))&&t(n)},e.prototype._keys_remain=function(e){var t,n,i,r,s;for(s=e.keys,i=0,r=s.length;r>i;i++)if(t=s[i],T.call(this._keys_down,t)>=0){n=!0;break}return n},e.prototype._key_down=function(e,t){var n,i,r,s,o,u,c,a,l,f,_,d,p,y,m;l=h(e,t),l&&(e=l),this._add_key_to_sequence(e,t),a=this._get_sequence(e),a&&this._fire("keydown",a,t);for(o in x)r=x[o],t[r]&&(o===e||T.call(this._keys_down,o)>=0||this._keys_down.push(o));for(o in x)if(r=x[o],o!==e&&T.call(this._keys_down,o)>=0&&!t[r]){if("cmd"===o&&"cmd"!==w)continue;for(s=f=0,m=this._keys_down.length;m>=0?m>f:f>m;s=m>=0?++f:--f)this._keys_down[s]===o&&this._keys_down.splice(s,1)}for(i=this._get_active_combos(e),c=this._get_potential_combos(e),_=0,p=i.length;p>_;_++)n=i[_],this._handle_combo_down(n,c,e,t);if(c.length)for(d=0,y=c.length;y>d;d++)u=c[d],this._prevent_default(t,u.prevent_default);T.call(this._keys_down,e)<0&&this._keys_down.push(e)},e.prototype._handle_combo_down=function(e,t,n,i){var r,s,o,u,c,a;if(T.call(e.keys,n)<0)return!1;if(this._prevent_default(i,e&&e.prevent_default),r=!1,T.call(this._keys_down,n)>=0&&(r=!0,!e.allows_key_repeat()))return!1;if(u=this._add_to_active_combos(e,n),e.keyup_fired=!1,s=!1,e.is_exclusive)for(c=0,a=t.length;a>c;c++)if(o=t[c],o.is_exclusive&&o.keys.length>e.keys.length){s=!0;break}return!s&&(e.is_counting&&"function"==typeof e.on_keydown&&(e.count+=1),u)?this._fire("keydown",e,i,r):void 0},e.prototype._key_up=function(e,t){var n,i,r,s,o,u,c,a,l,f,_,d,p,y,m,v,g,b,w;if(a=e,c=h(e,t),c&&(e=c),c=k[a],t.shiftKey?c&&T.call(this._keys_down,c)>=0||(e=a):a&&T.call(this._keys_down,a)>=0||(e=c),u=this._get_sequence(e),u&&this._fire("keyup",u,t),T.call(this._keys_down,e)<0)return!1;for(o=l=0,v=this._keys_down.length;v>=0?v>l:l>v;o=v>=0?++l:--l)if((g=this._keys_down[o])===e||g===c||g===a){this._keys_down.splice(o,1);break}for(i=this._active_combos.length,s=[],b=this._active_combos,f=0,p=b.length;p>f;f++)n=b[f],T.call(n.keys,e)>=0&&s.push(n);for(_=0,y=s.length;y>_;_++)r=s[_],this._handle_combo_up(r,t,e);if(i>1)for(w=this._active_combos,d=0,m=w.length;m>d;d++)n=w[d],void 0===n||T.call(s,n)>=0||this._keys_remain(n)||this._remove_from_active_combos(n)},e.prototype._handle_combo_up=function(e,t,n){var i,r;this._prevent_default(t,e&&e.prevent_default),r=this._keys_remain(e),e.keyup_fired||(i=this._keys_down.slice(),i.push(n),(!e.is_solitary||u(i,e.keys))&&(this._fire("keyup",e,t),e.is_counting&&"function"==typeof e.on_keyup&&"function"!=typeof e.on_keydown&&(e.count+=1))),r||(this._fire("release",e,t),this._remove_from_active_combos(e))},e.prototype.simple_combo=function(e,t){return this.register_combo({keys:e,on_keydown:t})},e.prototype.counting_combo=function(e,t){return this.register_combo({keys:e,is_counting:!0,is_unordered:!1,on_keydown:t})},e.prototype.sequence_combo=function(e,t){return this.register_combo({keys:e,on_keydown:t,is_sequence:!0,is_exclusive:!0})},e.prototype.register_combo=function(e){var t,i,r,s;"string"==typeof e.keys&&(e.keys=e.keys.split(" ")),s=this._defaults;for(i in s)O.call(s,i)&&(r=s[i],void 0===e[i]&&(e[i]=r));return t=new n(e),q(t)?(this._registered_combos.push(t),t):void 0},e.prototype.register_many=function(e){var t,n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(this.register_combo(t));return r},e.prototype.unregister_combo=function(e){var t,i,r,s,o,a;if(!e)return!1;if(i=function(e){return function(t){var n,i,r,s;for(s=[],n=i=0,r=e._registered_combos.length;r>=0?r>i:i>r;n=r>=0?++i:--i){if(t===e._registered_combos[n]){e._registered_combos.splice(n,1);break}s.push(void 0)}return s}}(this),e instanceof n)return i(e);for("string"==typeof e&&(e=e.split(" ")),o=this._registered_combos,a=[],r=0,s=o.length;s>r;r++)t=o[r],null!=t&&(t.is_unordered&&u(e,t.keys)||!t.is_unordered&&c(e,t.keys)?a.push(i(t)):a.push(void 0));return a},e.prototype.unregister_many=function(e){var t,n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(this.unregister_combo(t));return r},e.prototype.get_registered_combos=function(){return this._registered_combos},e.prototype.reset=function(){return this._registered_combos=[]},e.prototype.listen=function(){return this._prevent_capture=!1},e.prototype.stop_listening=function(){return this._prevent_capture=!0},e.prototype.get_meta_key=function(){return w},e}(),l=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(w="cmd")},o=function(){-1!==navigator.userAgent.indexOf("Opera")&&(g[17]="cmd")},a=function(e){return g[e]},_=function(e,t){var n;return e.filter?e.filter(t):function(){var i,r,s;for(s=[],i=0,r=e.length;r>i;i++)n=e[i],t(n)&&s.push(n);return s}()},u=function(e,t){var n,i,r;if(e.length!==t.length)return!1;for(i=0,r=e.length;r>i;i++)if(n=e[i],!(T.call(t,n)>=0))return!1;return!0},c=function(e,t){var n,i,r;if(e.length!==t.length)return!1;for(n=i=0,r=e.length;r>=0?r>i:i>r;n=r>=0?++i:--i)if(e[n]!==t[n])return!1;return!0},p=function(e,t){var n,i,r;for(i=0,r=e.length;r>i;i++)if(n=e[i],T.call(t,n)<0)return!1;return!0},d=Array.prototype.indexOf||function(e,t){var n,i,r;for(n=i=0,r=e.length;r>=0?r>=i:i>=r;n=r>=0?++i:--i)if(e[n]===t)return n;return-1},y=function(e,t){var n,i,r,s,o;for(r=0,s=0,o=e.length;o>s;s++){if(i=e[s],n=d.call(t,i),!(n>=r))return!1;r=n}return!0},b=function(){return s.debug?console.log.apply(console,arguments):void 0},m=function(e){var t,n,i;t=!1;for(i in g)if(n=g[i],e===n){t=!0;break}if(!t)for(i in k)if(n=k[i],e===n){t=!0;break}return t},q=function(e){var t,n,i,r,s,o,u,c,a,h,l,_,p,y,g;for(u=!0,e.keys.length||b("You're trying to bind a combo with no keys:",e),n=a=0,y=e.keys.length;y>=0?y>a:a>y;n=y>=0?++a:--a)i=e.keys[n],t=v[i],t&&(i=e.keys[n]=t),"meta"===i&&e.keys.splice(n,1,w),"cmd"===i&&b('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(g=e.keys,h=0,_=g.length;_>h;h++)i=g[h],m(i)||(b('Do not recognize the key "'+i+'"'),u=!1);if(T.call(e.keys,"meta")>=0||T.call(e.keys,"cmd")>=0){for(s=e.keys.slice(),l=0,p=E.length;p>l;l++)r=E[l],(n=d.call(s,r))>-1&&s.splice(n,1);s.length>1&&(b("META and CMD key combos cannot have more than 1 non-modifier keys",e,s),u=!1)}for(o in e)c=e[o],"undefined"===f[o]&&b("The property "+o+" is not a valid combo property. Your combo has still been registered.");return u},h=function(e,t){var n;return t.shiftKey?(n=k[e],null!=n?n:!1):!1},x={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},v={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},k={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},g={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num",59:";",61:"=",173:"-"},s._keycode_dictionary=g,s._is_array_in_array_sorted=y,l(),o(),i=[],r=function(){return s}.apply(t,i),!(void 0!==r&&(e.exports=r))}).call(this)},function(e,t,n){e.exports=n(7)},function(e,t,n){"use strict";function i(e){return this instanceof i?(e||(e={}),"number"==typeof e&&(e={frameRate:e}),null!=e.useNative||(e.useNative=!0),this.options=e,this.frameRate=e.frameRate||i.FRAME_RATE,this._frameLength=1e3/this.frameRate,this._isCustomFrameRate=this.frameRate!==i.FRAME_RATE,this._timeoutId=null,this._callbacks={},this._lastTickTime=0,void(this._tickCounter=0)):new i(e)}var r=n(8),s=n(1),o=n(10),u=r.request,c=r.cancel;e.exports=i,i.FRAME_RATE=60,i.shim=function(e){var t=new i(e);return window.requestAnimationFrame=function(e){return t.request(e)},window.cancelAnimationFrame=function(e){return t.cancel(e)},t},i.prototype.request=function(e){var t=this;if(++this._tickCounter,r.supported&&this.options.useNative&&!this._isCustomFrameRate)return u(e);if(!e)throw new TypeError("Not enough arguments");if(null==this._timeoutId){var n=this._frameLength+this._lastTickTime-s();0>n&&(n=0),this._timeoutId=setTimeout(function(){t._lastTickTime=s(),t._timeoutId=null,++t._tickCounter;var e=t._callbacks;t._callbacks={};for(var n in e)e[n]&&(r.supported&&t.options.useNative?u(e[n]):e[n](o.now()))},n)}return this._callbacks[this._tickCounter]=e,this._tickCounter},i.prototype.cancel=function(e){r.supported&&this.options.useNative&&c(e),delete this._callbacks[e]}},function(e,t){"use strict";var n=window;try{n.top.name,n=n.top}catch(i){}t.request=n.requestAnimationFrame,t.cancel=n.cancelAnimationFrame||n.cancelRequestAnimationFrame,t.supported=!1;for(var r=["Webkit","Moz","ms","O"],s=0;s<r.length&&!t.request;s++)t.request=n[r[s]+"RequestAnimationFrame"],t.cancel=n[r[s]+"CancelAnimationFrame"]||n[r[s]+"CancelRequestAnimationFrame"];t.request&&t.request.call(null,function(){t.supported=!0})},function(e,t,n){"use strict";var i=n(1);t.navigationStart=i()},function(e,t,n){"use strict";var i=n(1),r=n(9);t.now=function(){return window.performance&&window.performance.now?window.performance.now():i()-r.navigationStart}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=n(2),s=n(31),o=i(s),u=n(5),c=i(u),a=new o["default"],h=new c["default"].Listener;h.simple_combo("up",function(){a.emit("move",r.UP)}),h.simple_combo("right",function(){a.emit("move",r.RIGHT)}),h.simple_combo("down",function(){a.emit("move",r.DOWN)}),h.simple_combo("left",function(){a.emit("move",r.LEFT)}),h.simple_combo("enter",function(){a.emit("new_game")}),e.exports=a},function(e,t){"use strict";var n=document.getElementById("snake");document.body.style.margin="0px",document.body.style.height=window.innerHeight-3+"px",n||(n=document.createElement("canvas"),n.id="snake",document.body.appendChild(n)),n.width=document.body.offsetWidth,n.height=document.body.offsetHeight,e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),s=i(r),o=n(16),u=i(o),c=n(17),a=i(c),h=n(2),l=function(){function e(t,n,i,r){(0,u["default"])(this,e),this.c=t,this.width=n,this.height=i,this.grid={w:r,h:Math.round(r/n*i)},this.state=h.IDLE,this.radius=Math.round(n/r)/2,this.apple={x:null,y:null},this.position={x:null,y:null},this.direction=null,this.score=0,this.snake=[],this.wait=300,this.cooldown=300}return(0,a["default"])(e,[{key:"newGame",value:function(){var e=this.randomPos();for(this.snake=[],this.snake.push({x:Math.round(this.grid.w/2),y:Math.round(this.grid.h/2)}),this.snake.push({x:this.snake[0].x+1,y:this.snake[0].y}),this.snake.push({x:this.snake[0].x+2,y:this.snake[0].y}),this.position=this.snake[0],this.randomDir();this.collision(e);)e=this.randomPos();this.apple=e,this.score=0,this.state=h.STARTED}},{key:"setDir",value:function(e){this.direction=e}},{key:"getState",value:function(){return this.state}},{key:"getScore",value:function(){return this.score}},{key:"randomDir",value:function(){var e=3;switch(Math.floor(Math.random()*e)){case 0:return this.direction=h.UP,h.UP;case 1:return this.direction=h.LEFT,h.LEFT;case 2:return this.direction=h.DOWN,h.DOWN;default:return this.direction=null,null}}},{key:"randomPos",value:function(){return{x:Math.floor(Math.random()*this.grid.w),y:Math.floor(Math.random()*this.grid.h)}}},{key:"collision",value:function(e){var t;for(t=0;t<this.snake.length;t++)if(e.x===this.snake[t].x&&e.y===this.snake[t].y)return!0;return!1}},{key:"update",value:function(e){var t,n=(0,s["default"])({},this.position);if(this.wait=this.wait-e,!(this.wait>0||this.state!==h.STARTED)){switch(this.wait=this.cooldown,this.direction){case h.UP:n.y=n.y-1,n.y<0&&(n.y=this.grid.h-1);break;case h.RIGHT:n.x=n.x+1,n.x>=this.grid.w&&(n.x=0);break;case h.DOWN:n.y=n.y+1,n.y>=this.grid.h&&(n.y=0);break;case h.LEFT:n.x=n.x-1,n.x<0&&(n.x=this.grid.w-1)}if(n.x===this.apple.x&&n.y===this.apple.y){for(t=this.randomPos();this.collision(t);)t=this.randomPos();this.apple=t,this.snake.unshift(n),this.position=n,this.score=this.score+h.SCORE_INCREASE,this.score<h.SCORE_CAP&&(this.cooldown=h.COOLDOWN-this.score)}else this.collision(n)?this.state=h.ENDED:(this.snake.pop(),this.snake.unshift(n),this.position=n)}}},{key:"render",value:function(){var e;if(this.state!==h.IDLE){for(this.c.fillStyle="#333",e=0;e<this.snake.length;e++)this.c.beginPath(),this.c.arc(this.radius+this.snake[e].x/this.grid.w*this.width,this.radius+this.snake[e].y/this.grid.h*this.height,this.radius,0,2*Math.PI),this.c.closePath(),this.c.fill();this.c.fillStyle="#f00",this.c.beginPath(),this.c.arc(this.radius+this.apple.x/this.grid.w*this.width,this.radius+this.apple.y/this.grid.h*this.height,this.radius,0,2*Math.PI),this.c.closePath(),this.c.fill()}}}]),e}();t["default"]=l},function(e,t,n){e.exports={"default":n(18),__esModule:!0}},function(e,t,n){e.exports={"default":n(19),__esModule:!0}},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(15),s=i(r);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,s["default"])(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){n(30),e.exports=n(3).Object.assign},function(e,t,n){var i=n(4);e.exports=function(e,t,n){return i.setDesc(e,t,n)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(20);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(26),r=n(3),s=n(22),o="prototype",u=function(e,t,n){var c,a,h,l=e&u.F,f=e&u.G,_=e&u.S,d=e&u.P,p=e&u.B,y=e&u.W,m=f?r:r[t]||(r[t]={}),v=f?i:_?i[t]:(i[t]||{})[o];f&&(n=t);for(c in n)a=!l&&v&&c in v,a&&c in m||(h=a?v[c]:n[c],m[c]=f&&"function"!=typeof v[c]?n[c]:p&&a?s(h,i):y&&v[c]==h?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[o]=e[o],t}(h):d&&"function"==typeof h?s(Function.call,h):h,d&&((m[o]||(m[o]={}))[c]=h))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,e.exports=u},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(21);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){var i=n(4),r=n(29),s=n(27);e.exports=n(25)(function(){var e=Object.assign,t={},n={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach(function(e){n[e]=e}),7!=e({},t)[i]||Object.keys(e({},n)).join("")!=r})?function(e,t){for(var n=r(e),o=arguments,u=o.length,c=1,a=i.getKeys,h=i.getSymbols,l=i.isEnum;u>c;)for(var f,_=s(o[c++]),d=h?a(_).concat(h(_)):a(_),p=d.length,y=0;p>y;)l.call(_,f=d[y++])&&(n[f]=_[f]);return n}:Object.assign},function(e,t,n){var i=n(23);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(24);i(i.S+i.F,"Object",{assign:n(28)})},function(e,t,n){"use strict";function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(){}var s="function"!=typeof Object.create?"~":!1;r.prototype._events=void 0,r.prototype.listeners=function(e,t){var n=s?s+e:e,i=this._events&&this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,u=new Array(o);o>r;r++)u[r]=i[r].fn;return u},r.prototype.emit=function(e,t,n,i,r,o){var u=s?s+e:e;if(!this._events||!this._events[u])return!1;var c,a,h=this._events[u],l=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,r),!0;case 6:return h.fn.call(h.context,t,n,i,r,o),!0}for(a=1,c=new Array(l-1);l>a;a++)c[a-1]=arguments[a];h.fn.apply(h.context,c)}else{var f,_=h.length;for(a=0;_>a;a++)switch(h[a].once&&this.removeListener(e,h[a].fn,void 0,!0),l){case 1:h[a].fn.call(h[a].context);break;case 2:h[a].fn.call(h[a].context,t);break;case 3:h[a].fn.call(h[a].context,t,n);break;default:if(!c)for(f=1,c=new Array(l-1);l>f;f++)c[f-1]=arguments[f];h[a].fn.apply(h[a].context,c)}}return!0},r.prototype.on=function(e,t,n){var r=new i(t,n||this),o=s?s+e:e;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},r.prototype.once=function(e,t,n){var r=new i(t,n||this,!0),o=s?s+e:e;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},r.prototype.removeListener=function(e,t,n,i){var r=s?s+e:e;if(!this._events||!this._events[r])return this;var o=this._events[r],u=[];if(t)if(o.fn)(o.fn!==t||i&&!o.once||n&&o.context!==n)&&u.push(o);else for(var c=0,a=o.length;a>c;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&u.push(o[c]);return u.length?this._events[r]=1===u.length?u[0]:u:delete this._events[r],this},r.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[s?s+e:e]:this._events=s?{}:Object.create(null),this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=s,e.exports=r}]);